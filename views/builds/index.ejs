<%- include('../partials/header') %>

<div class="build-page">

    <h1 class="display-5"><strong>Build Your Personal Pasta:</strong></h1>
    <hr>
    
    <div class="build-content">
    
      <!-- Lists all ingredients selected in Explore page separated by category -->
      <div class="selected-container">
        <h1 class="fs-2"><strong>1) Selected Ingredient Inventory:</strong></h1><br>

        <h5>Pasta</h5>
        <div class="textBgBuild">
          <% if (build) { %>
            <% build.pasta.forEach(bp=> { %>
              <div class="d-flex justify-content-between">
                <%= bp.name %>
                <form action="/pasta/<%= bp._id %>?_method=DELETE" method="POST">
                  <button class="btn btn-danger btn-sm deleteBtn" type="submit">X</button>
                </form>
              </div><br>
            <% }) %>
          <% } %>
          <% if (!build.pasta.length) { %>
            - None selected - <br>
          <% } %>
        </div><br>
    
        <h5>Sauce</h5>
        <div class="textBgBuild">
          <% if (build) { %>
            <% build.sauce.forEach(bs=> { %>
              <div class="d-flex justify-content-between">
                <%= bs.name %>
                <form action="/sauce/<%= bs._id %>?_method=DELETE" method="POST">
                  <button class="btn btn-danger btn-sm deleteBtn" type="submit">X</button>
                </form>
              </div><br>
            <% }) %>
          <% } %>
          <% if (!build.sauce.length) { %>
            - None selected - <br>
          <% } %>
        </div><br>
    
        <h5>Vegetables</h5>
        <div class="textBgBuild">
          <% if (build) { %>
            <% build.vege.forEach(bv=> { %>
              <div class="d-flex justify-content-between">
                <%= bv.name %>
                <form action="/vege/<%= bv._id %>?_method=DELETE" method="POST">
                  <button class="btn btn-danger btn-sm deleteBtn" type="submit">X</button>
                </form>
              </div><br>
            <% }) %>
          <% } %>
          <% if (!build.vege.length) { %>
            - None selected - <br>
          <% } %>
        </div><br>
    
        <h5>Protein</h5>
        <div class="textBgBuild">
          <% if (build) { %>
            <% build.protein.forEach(bp=> { %>
              <div class="d-flex justify-content-between">
                <%= bp.name %>
                <form action="/protein/<%= bp._id %>?_method=DELETE" method="POST">
                  <button class="btn btn-danger btn-sm deleteBtn" type="submit">X</button>
                </form>
              </div><br>
            <% }) %>
          <% } %>
          <% if (!build.protein.length) { %>
            - None selected - <br>
          <% } %>
        </div>
      </div>
      <div class="build-divider"></div>
      <!-- List all the ingredients on the left but in selectable form for dish generation -->
      <div class="textBgCombine combine-container">
        <% if (build) { %>
          <h1 class="fs-2"><strong>2) Mix & Match:</strong></h1><br>
          <form action="/builds" method="POST">
      
            <label id="combinePasta">Pasta</label><br>
              <select name="pasta" class="form-control" required oninvalid="this.setCustomValidity('Please add a pasta from Explore page')" oninput="setCustomValidity('')">
                <% build.pasta.forEach(bp=> { %>
                  <option value="<%= bp._id %>"><%= bp.name %></option>
                <% }) %>
              </select><br>
            <label id="combineSauce">Sauce</label><br>
              <select name="sauce" class="form-control" required oninvalid="this.setCustomValidity('Please add a sauce from Explore page')" oninput="setCustomValidity('')">
                <% build.sauce.forEach(bs=> { %>
                  <option value="<%= bs._id %>"><%= bs.name %></option>
                <% }) %>
              </select><hr>
            <label id="combineVege">Vegetable</label><br>
            <div class="combine-checkbox">
              <% build.vege.forEach(bv=> { %>
                <input type="checkbox" value="<%= bv._id %>" name="vege"> <%= bv.name %><br>
              <% }) %>
            </div>
              <% if (!build.vege.length) { %>
                <div class="d-flex justify-content-center">
                  - None selected - <br>
                </div>
              <% } %>
              <br>
            <label id="combineProtein">Protein</label><br>
            <div class="combine-checkbox">
              <% build.protein.forEach(bp=> { %>
                <input type="checkbox" value="<%= bp._id %>" name="protein"> <%= bp.name %><br>
              <% }) %>
            </div>
              <% if (!build.protein.length) { %>
                <div class="d-flex justify-content-center">
                  - None selected - <br>
                </div>
              <% } %>
              <br>
            <label id="combineName">NAME YOUR DISH!</label><br>
            <input class="form-control" name="mealName" type="text" placeholder="Bestest Pasta-iest Pasta" required>
            <br><br>
            <button class="button-82-pushable" type="submit" role="button">
              <span class="button-82-shadow"></span>
              <span class="button-82-edge"></span>
              <span class="button-82-front text">
                COOK
              </span>
            </button>
            
          </form>
        <% } %>
      </div>
    
    </div>
</div>

<%- include('../partials/footer') %>
